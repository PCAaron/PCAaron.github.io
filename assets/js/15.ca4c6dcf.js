(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{215:function(t,e,r){"use strict";r.r(e);var a=r(0),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"智能合约部署脚本"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#智能合约部署脚本"}},[t._v("#")]),t._v(" 智能合约部署脚本")]),t._v(" "),r("blockquote",[r("p",[t._v("从Solidity源码中拿到机器码bytecode后，我们需要将它部署到以太网中。")])]),t._v(" "),r("h2",{attrs:{id:"web3-js"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#web3-js"}},[t._v("#")]),t._v(" web3.js")]),t._v(" "),r("blockquote",[r("p",[t._v("链接前端与区块链的桥梁"),r("a",{attrs:{href:"https://web3js.readthedocs.io/en/1.0/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("web3.js"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("web3.js中包含了多个以太坊生态中不太功能的模块，其中包括:")]),t._v(" "),r("ol",[r("li",[t._v("web3-eth:方便 Javascript 和以太坊区块链通信，部署、调用智能合约")]),t._v(" "),r("li",[t._v("web3-utils:为 DApp 开发者提供了大量的工具函数")]),t._v(" "),r("li",[t._v("web3-shh:方便做基于 whisper 协议的 P2P 通信和广播")]),t._v(" "),r("li",[t._v("web3-bzz:方便做基于 swarm 协议的去中心化文件存储")])]),t._v(" "),r("p",[t._v("web3.js通过插件机制（providers）和以太坊不同网络通信的模式：\n"),r("img",{attrs:{src:"/images/jinjie3_1.png",alt:"通信模式"}})]),t._v(" "),r("h2",{attrs:{id:"部署的必要条件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#部署的必要条件"}},[t._v("#")]),t._v(" 部署的必要条件")]),t._v(" "),r("blockquote",[r("p",[t._v("客户端和以太坊网络的交互可以定性为接口调用或者交易，其中智能合约的部署属于交易。部署除了必须有bytecode外，还需发起交易的必要条件也满足：")])]),t._v(" "),r("ol",[r("li",[t._v("余额大于0的账户")]),t._v(" "),r("li",[t._v("与目标网络的通信")])]),t._v(" "),r("blockquote",[r("p",[t._v("区块链上的任何交易都会被发送到某个网络上，并被这个网络中的节点打包确认，所以可以考虑把智能合约部署到网络上。如何跟这个网络通信，惯常的做法是自己跑个节点，然后让节点加入到网络中，这样我们的交易通过自己运行的节点广播给网络中的其他节点，就能被打包确认。但是实际上自己跑节点成本还是很高的，先社区已有人做了以太坊网络的入口节点，并为开发者提供了接口直接调用，例如"),r("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Infura"),r("OutboundLink")],1),t._v("\n通过"),r("a",{attrs:{href:"https://infura.io/signup",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://infura.io/signup"),r("OutboundLink")],1),t._v("注册完成后，infura就会向我们的邮箱发送每个网络的入口节点访问地址，之后我们选择Rinkeby入口地址。")])]),t._v(" "),r("h2",{attrs:{id:"编写智能合约部署脚本deploy-js"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#编写智能合约部署脚本deploy-js"}},[t._v("#")]),t._v(" 编写智能合约部署脚本deploy.js")]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/jinjie3_.png",alt:"deploy.js"}})]),t._v(" "),r("h2",{attrs:{id:"使用-etherscan-和-remix-等查看和测试合约实例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用-etherscan-和-remix-等查看和测试合约实例"}},[t._v("#")]),t._v(" 使用 etherscan 和 remix 等查看和测试合约实例")]),t._v(" "),r("blockquote",[r("p",[t._v("智能合约实例是存储在以太坊网络上的，查看合约实例通常的做法是通过etherscan、remix 去访问。当然也有通过代码的方式。")])]),t._v(" "),r("h3",{attrs:{id:"通过etherscan查看合约"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通过etherscan查看合约"}},[t._v("#")]),t._v(" 通过etherscan查看合约")]),t._v(" "),r("blockquote",[r("p",[t._v("通过Metamask打开在etherscan上的主页即可查看到历史交易：\n"),r("img",{attrs:{src:"/images/jinjie4_1.png",alt:"历史交易"}})])]),t._v(" "),r("h2",{attrs:{id:"star-or-打赏"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#star-or-打赏"}},[t._v("#")]),t._v(" star or 打赏")]),t._v(" "),r("blockquote",[r("p",[t._v("Imtoken地址: 0x4a6Ac825993737a4f7F1ed12fcAc1b27e247c55A")])]),t._v(" "),r("blockquote",[r("p",[t._v("打赏码\n"),r("img",{attrs:{src:"/wxzz.jpg",alt:"赞助支持"}})])])])}),[],!1,null,null,null);e.default=s.exports}}]);