(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{242:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webpack的基本用法：核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack的基本用法：核心概念"}},[t._v("#")]),t._v(" webpack的基本用法：核心概念")]),t._v(" "),s("p",[t._v("webpack是一个JavaScript应用程序的静态模块打包器(module bundler)。当webpack处理\n应用程序时，会从命令行或配置文件中定义的一个模块列表开始处理应用，以这些入口起点(entry)开始，\n会递归地构建一个依赖关系图，由于文件间的依赖关系，这使得webpack可以接受例如图片、\n字体图标等非代码资源作为依赖来提供给应用程序，然后将应用程序需要的所有模块打包成一个\n或多个可有浏览器加载的bundle。")]),t._v(" "),s("h2",{attrs:{id:"入口起点：entry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口起点：entry"}},[t._v("#")]),t._v(" 入口起点：entry")]),t._v(" "),s("p",[t._v("entry是用来指定webpack的打包入口的，即依赖图的入口。"),s("br"),t._v("\n可通过webpack配置中配置"),s("strong",[t._v("entry")]),t._v("属性来指定一个或多个入口起点。默认值为./src。")]),t._v(" "),s("h3",{attrs:{id:"单入口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单入口"}},[t._v("#")]),t._v(" 单入口")]),t._v(" "),s("p",[t._v("单入口时，entry接受一个字符串，一般适用于构建单页应用。"),s("br"),t._v("\n单入口的写法，webpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"多入口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多入口"}},[t._v("#")]),t._v(" 多入口")]),t._v(" "),s("p",[t._v("多入口时，entry接受一个对象，一般适用于构建多页应用"),s("br"),t._v("\n多入口的写法，webpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vendors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/vendors.js'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"输出：output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出：output"}},[t._v("#")]),t._v(" 输出：output")]),t._v(" "),s("p",[t._v("相对于entry来对于的源码来说，output就是告诉webpack如何将编译后的文件输出到硬盘。\n其中需要指明的时只能由一个output输出配置。")]),t._v(" "),s("h3",{attrs:{id:"output属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output属性"}},[t._v("#")]),t._v(" output属性")]),t._v(" "),s("ul",[s("li",[t._v("filename：输出文件的文件名")]),t._v(" "),s("li",[t._v("path：目标输出目录的绝对路径")])]),t._v(" "),s("h3",{attrs:{id:"单入口的output用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单入口的output用法"}},[t._v("#")]),t._v(" 单入口的output用法")]),t._v(" "),s("p",[t._v("对于单入口时，output可直接指定对应的filename和路径即可。"),s("br"),t._v("\nwebpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/proj/public/assets'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"多入口的output用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多入口的output用法"}},[t._v("#")]),t._v(" 多入口的output用法")]),t._v(" "),s("p",[t._v("对应于多个entry来说，由于output只能配置一项，所以需要通过"),s("strong",[t._v("占位符")]),t._v("来确保文件名称的唯一性。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/search.js'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/dist'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写入到硬盘：./dist/app.js, ./dist/search.js")]),t._v("\n")])])]),s("p",[t._v("demo的代码地址："),s("a",{attrs:{href:"https://github.com/PCAaron/blogCode/tree/master/webpack/webpack-multi",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/PCAaron/blogCode/tree/master/webpack/webpack-multi"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("运行结果："),s("br"),t._v(" "),s("img",{attrs:{src:"/webpack/basic1-1.png",alt:"webpack多入口打包output"}})]),t._v(" "),s("h2",{attrs:{id:"loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[t._v("#")]),t._v(" loader")]),t._v(" "),s("p",[t._v("webpack开箱即用只支持JS和JSON两种文件类型，通过loader，可实现支持其他类型文件，例如\ncss预编译器、JSX、内联图片转dataURL等转化为有效的模块并添加到依赖图中。")]),t._v(" "),s("p",[t._v("loader本身时一个函数，接受源文件作为参数。")]),t._v(" "),s("h3",{attrs:{id:"loader的用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader的用法"}},[t._v("#")]),t._v(" loader的用法")]),t._v(" "),s("p",[t._v("推荐在webpack.config.js文件中module.rules配置项中指定loader。例外亦可通过import语句内联\n或shell命令中指定。")]),t._v(" "),s("p",[t._v("其中，rules有两个配置属性：")]),t._v(" "),s("ul",[s("li",[t._v("test属性，用于匹配规则。")]),t._v(" "),s("li",[t._v("use属性，指定使用的loader名称。")])]),t._v(" "),s("p",[t._v("webpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.ts$/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ts-loader'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"常用的loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用的loader"}},[t._v("#")]),t._v(" 常用的loader")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("babel-loader")]),t._v(" "),s("td",[t._v("转换ES6+等JS新特性语法")])]),t._v(" "),s("tr",[s("td",[t._v("ts-loader")]),t._v(" "),s("td",[t._v("将TS转换成JS")])]),t._v(" "),s("tr",[s("td",[t._v("css-loader")]),t._v(" "),s("td",[t._v("支持.css文件的加载和解析")])]),t._v(" "),s("tr",[s("td",[t._v("style-loader")]),t._v(" "),s("td",[t._v("将css代码注入到JS中")])]),t._v(" "),s("tr",[s("td",[t._v("less-loader")]),t._v(" "),s("td",[t._v("将less文件转换成css")])]),t._v(" "),s("tr",[s("td",[t._v("file-loader")]),t._v(" "),s("td",[t._v("进行图片、字体等的打包")])]),t._v(" "),s("tr",[s("td",[t._v("url-loader")]),t._v(" "),s("td",[t._v("将小文件以base64的方式注入到代码中")])]),t._v(" "),s("tr",[s("td",[t._v("raw-loader")]),t._v(" "),s("td",[t._v("将文件以字符串的形式导入")])]),t._v(" "),s("tr",[s("td",[t._v("thread-loader")]),t._v(" "),s("td",[t._v("多进程打包JS和CSS")])])])]),t._v(" "),s("h2",{attrs:{id:"插件：plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件：plugins"}},[t._v("#")]),t._v(" 插件：plugins")]),t._v(" "),s("p",[t._v("plugins作用于bundle文件的优化，资源管理和环境变量注入。目的在于解决loader无法实现的其他事。")]),t._v(" "),s("p",[t._v("webpack的plugins是一个具有apply属性的JS对象。apply属性会被webpack compiler调用，\n所以plugins可以作用于构建过程的整个过程。")]),t._v(" "),s("h3",{attrs:{id:"plugins的用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins的用法"}},[t._v("#")]),t._v(" plugins的用法")]),t._v(" "),s("p",[t._v("由于plugins可以携带参数/选项，所以需在 webpack 配置中，向 plugins 属性传入 new 实例。"),s("br"),t._v("\nwebpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            template"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"常用的plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用的plugins"}},[t._v("#")]),t._v(" 常用的plugins")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("CommonsChunkPlugin")]),t._v(" "),s("td",[t._v("将chunks相同的模块代码提取成公共js")])]),t._v(" "),s("tr",[s("td",[t._v("CleanWebpackPlugin")]),t._v(" "),s("td",[t._v("清空构建目录")])]),t._v(" "),s("tr",[s("td",[t._v("ExtractTextWebpackPlugin")]),t._v(" "),s("td",[t._v("将CSS从bunlde文件里提取成一个独立的CSS文件")])]),t._v(" "),s("tr",[s("td",[t._v("CopyWebpackPlugin")]),t._v(" "),s("td",[t._v("将文件或者文件夹拷贝到构建的输出目录")])]),t._v(" "),s("tr",[s("td",[t._v("HtmlWebpackPlugin")]),t._v(" "),s("td",[t._v("创建html文件去承载输出的bundle")])]),t._v(" "),s("tr",[s("td",[t._v("UglifyjsWebpackPlugin")]),t._v(" "),s("td",[t._v("压缩JS")])]),t._v(" "),s("tr",[s("td",[t._v("ZipWebpackPlugin")]),t._v(" "),s("td",[t._v("将打包出的资源生成一个zip包")])])])]),t._v(" "),s("h2",{attrs:{id:"模式：mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模式：mode"}},[t._v("#")]),t._v(" 模式：mode")]),t._v(" "),s("p",[t._v("mode配置选项，是用来指定当前的构建环境是production、development还是none。是4.0后\n才引入的配置。")]),t._v(" "),s("p",[t._v("通过mode参数可以自动的触发webpack响应模式下的内置优化，默认值为production。")]),t._v(" "),s("h3",{attrs:{id:"mode的内置函数功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mode的内置函数功能"}},[t._v("#")]),t._v(" mode的内置函数功能")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("development")]),t._v(" "),s("td",[t._v("会将process.env.NODE_ENV的值设为development。启动NamedChunksPlugin和NamedModulesPlugin。")])]),t._v(" "),s("tr",[s("td",[t._v("production")]),t._v(" "),s("td",[t._v("会将 process.env.NODE_ENV 的值设为 production。启用 FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin 和 UglifyJsPlugin。")])]),t._v(" "),s("tr",[s("td",[t._v("none")]),t._v(" "),s("td",[t._v("不启动任何优化选项")])])])]),t._v(" "),s("h3",{attrs:{id:"mode的用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mode的用法"}},[t._v("#")]),t._v(" mode的用法")]),t._v(" "),s("p",[t._v("mode推荐在webpack配置中使用"),s("br"),t._v("\nwebpack.dev.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("亦可通过CLI参数设置")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("production\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);